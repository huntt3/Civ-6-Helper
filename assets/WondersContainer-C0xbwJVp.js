import{r as l,j as a,b as C,C as E}from"./Footer-mDVGmihs.js";const N=({wonder:t,onClick:c})=>{const[o,i]=l.useState(!1);l.useEffect(()=>{const r=()=>{let d=!1;const g=JSON.parse(localStorage.getItem("civ6_tech_state")||"{}"),h=JSON.parse(localStorage.getItem("civ6_civics_state")||"{}");g[t.requirement]?.researched&&(d=!0),h[t.requirement]?.researched&&(d=!0),i(d)};r(),window.addEventListener("storage",r),window.addEventListener("civ6_tech_civic_state_changed",r),window.addEventListener("focus",r);const m=setInterval(r,500);return()=>{window.removeEventListener("storage",r),window.removeEventListener("civ6_tech_civic_state_changed",r),window.removeEventListener("focus",r),clearInterval(m)}},[t.requirement]);let n="bg-white text-gray-900 border border-gray-300";return t.built?n="bg-gray-200 text-black-900 border-gray-400":o&&(n="bg-green-100 text-green-900 border-green-400"),a.jsxs("div",{className:`rounded-lg shadow-md px-8 py-4 min-w-[180px] text-center text-lg cursor-pointer transition-colors outline-none focus:ring-2 focus:ring-yellow-400 hover:bg-gray-100 mb-2 ${n}`,tabIndex:0,role:"button","aria-pressed":t.built,onClick:c,"aria-label":t.name,children:[a.jsx("h3",{className:"font-semibold text-xl mb-2",children:t.name}),a.jsx("p",{className:"text-base",children:t.description})]})},W=({wonder:t,onClose:c,onToggleBuilt:o})=>{if(!t)return null;const i=`
    Requirement: ${t.requirement}
    Era: ${t.era}
  `,n=t.built?"Mark as Not Built":"Mark as Built";return a.jsx(C,{open:!!t,setOpen:c,title:t.name,message:i,confirmText:n,cancelText:"Close",onConfirm:o})},f="civ6-helper-wonders-built",x="civ6-helper-wonders-collapsed",I=()=>{const[t,c]=l.useState([]),[o,i]=l.useState(null),[n,r]=l.useState(()=>{const e=localStorage.getItem(x);return e?JSON.parse(e):!0}),[m,d]=l.useState(()=>{const e=localStorage.getItem(f);return e?JSON.parse(e):{}});l.useEffect(()=>{localStorage.setItem(f,JSON.stringify(m))},[m]),l.useEffect(()=>{localStorage.setItem(x,JSON.stringify(n))},[n]);const g=()=>{fetch("./jsonFiles/Wonders.json").then(e=>e.json()).then(e=>{const u=(e.Wonder||[]).map(p=>({...p,built:m[p.name]||!1}));c(u)}).catch(()=>c([]))};l.useEffect(()=>{g()},[]);const h=e=>i(e),b=()=>i(null),S=()=>{const e=!o.built;d(s=>({...s,[o.name]:e})),c(s=>s.map(u=>u.name===o.name?{...u,built:e}:u)),i(s=>s&&{...s,built:e})},j=()=>r(e=>!e),v=["Ancient","Classical","Medieval","Renaissance","Industrial","Modern","Atomic"];return v.map(e=>t.filter(s=>s.era===e)),a.jsxs(a.Fragment,{children:[a.jsx(E,{title:"Wonder Tracker",collapsed:n,onCollapse:j,onRefresh:()=>{d({}),r(!0),localStorage.removeItem(f),localStorage.removeItem(x),g()},ariaLabel:"Wonders",children:a.jsx("div",{className:"wonders-rows flex flex-col gap-6",children:v.map(e=>a.jsxs("section",{"aria-label":e,className:"w-full",children:[a.jsx("header",{className:"mb-2",children:a.jsxs("h3",{className:"text-lg font-semibold",style:{margin:0,color:"var(--primary-text-color-dark)"},children:[e," Era"]})}),a.jsx("div",{className:"flex flex-wrap gap-4 justify-center",children:t.filter(s=>s.era===e).map(s=>a.jsx(N,{wonder:s,onClick:()=>h(s)},s.name))})]},e))})}),a.jsx(W,{wonder:o,onClose:b,onToggleBuilt:S})]})};export{I as W};
